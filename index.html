<!DOCTYPE html>
<html>
<head>
    <title>Campus Defence</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="icon" type="image/png" href="img/fadderietslogga.png"/>

    <!-- Basic classes for rendering etc. -->
    <script type="text/javascript" src="js/gameArea.js"></script>
    <script type="text/javascript" src="js/gameObject.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    
    <!-- Somewhat generic classes for TD games -->
    <script type="text/javascript" src="js/map.js"></script>
    <script type="text/javascript" src="js/tower.js"></script>
    <script type="text/javascript" src="js/projectile.js"></script>
    <script type="text/javascript" src="js/creep.js"></script>

    <!-- Specific classes for campus defence -->
    <script type="text/javascript" src="js/towers/common.js"></script>
    <script type="text/javascript" src="js/towers/Fadderister.js"></script>
    <script type="text/javascript" src="js/towers/Faddrar.js"></script>
    <script type="text/javascript" src="js/creeps/fohs.js"></script>
    <script type="text/javascript" src="js/creeps/Ninjor.js"></script>
    <script type="text/javascript" src="js/levels.js"></script>

    <!-- Background music -->
    <script>
        let music = new Audio("audio/myrstacken.mp3");
        music.loop = true;
        music.preload = true;
        music.addEventListener('timeupdate', function () {
            var buffer = .44;
            if (this.currentTime > this.duration - buffer) {
                this.currentTime = 0;
                this.play();
            }
        }, false);
        
        let music_speedy = new Audio("audio/myrstacken_speedy.mp3");
        music_speedy.loop = true;
        music_speedy.preload = true;
        music_speedy.addEventListener('timeupdate', function () {
            var buffer = .44;
            if (this.currentTime > this.duration - buffer) {
                this.currentTime = 0;
                this.play();
            }
        }, false);
    </script>

    <!-- The main controller -->
    <script type="text/javascript" src="js/TDController.js"></script>
</head>
<body>
    <div class="header">
        <img src="img/fadderietslogga.png" style="height:1.5em; margin-right: 1ex; float:left;">
        Campus Defence
    </div>
    <div class="main">
        <div class="game">
            <div class="controllbar">
                <button id="playButton" class="controllerButton">
                    <!-- Verkar som att typ enda sättet att stylea SVGer är att embedda dem -->
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                        <path d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z">
                        </path>
                    </svg>
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pause" class="hideme svg-inline--fa fa-pause fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                        <path d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z">
                        </path>
                    </svg>
                </button>
                <button id="fastForwardButton" class="controllerButton">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="forward" class="svg-inline--fa fa-forward fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z">
                        </path>
                    </svg>
                </button>
                <button id="resetButton" class="controllerButton">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="redo-alt" class="svg-inline--fa fa-redo-alt fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z">
                        </path>
                    </svg>
                </button>
            </div>
            <div class="infobar">
                Nivå <span id="levelno">Ø</span> - <div id="creepSummary"></div>
            </div>
            <div class="statusbar">
                <div class="counter">&#128176; <span id="moneycounter" class="counter">500</span></div>
                <div class="counter">❤️<span id="healthcounter" class="counter">191</span></div>
            </div>
            <canvas name="gameboard" width="598" height="500" style="border:1px solid #000;">
            </canvas>
            <div id="messagebox">
                &gt;&nbsp;_
            </div>
        </div>
        <div class="menus">
            <div class="towerMarket">
                <div id="towerTemplate" class="towerInfo template">
                    <div>
                        <img name="image" src="img/fadderietslogga.png" />
                    </div>
                    <div>
                        <strong name="title">Title</strong> <span class="unlockInfo">Info</span><br />
                        <span name="desc">Desc. Lorem ipsum dolor sit amet</span>
                    </div>
                    <button name="buybtn">
                        Köp<br />(💰<span name="cost"></span>)
                    </button>
                </div> 
            </div>
            <div class="contextMenu hideme">
                <h3 name="name">Namn</h3>
                <div class="infofield">
                    <div>
                        <img name="image" src="img/fadderietslogga.png" />
                    </div>
                    <div>
                        Antal träffar<br />
                        Räckvidd<br />
                        Tid mellan <span name="shottype">skott</span><br />
                        Uppgraderingar
                    </div>
                    <div>
                        <span name="hits">X</span><br />
                        <span name="range">Y</span> rutor<br />
                        <span name="CDtime">Z</span><br />
                        <div name="upgrades"></div>
                    </div>
                </div>
                <div id="optionTemplate" class="contextOption template">
                    <div>
                        <img name="image" src="img/fadderietslogga.png" />
                    </div>
                    <div>
                        <strong name="title">Titel</strong> <span class="unlockInfo">Info</span><br />
                        <span name="desc">Ev. en beskrivning?</span>
                        <div name="incompatibleUpgrades">Denna uppgradering är inkompatibel med: </div>
                    </div>
                    <button name="actionbtn">
                        <span name="action"></span><br />(💰<span name="cost"></span>)
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        Ett spel av <a href="https://f.kth.se/arcade/kvackman" target="_blank">Pyro</a> & Cryo
        <br /><span style="font-size: 8px">Om du undrar var de fina ikonerna kommer ifrån så är svaret <a href="https://fontawesome.com/" target="_blank">Font Awesome</a></span>
    </div>

    <script type="text/javascript">
        var controller = new TDController();
        controller.setupTowerTable();   
    </script>
</body>
</html>

