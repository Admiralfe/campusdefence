<!DOCTYPE html>
<html>
<head>
    <title>Campus Defence</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <!-- Basic classes for rendering etc. -->
    <script type="text/javascript" src="js/gameArea.js"></script>
    <script type="text/javascript" src="js/gameObject.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    
    <!-- Somewhat generic classes for TD games -->
    <script type="text/javascript" src="js/map.js"></script>
    <script type="text/javascript" src="js/tower.js"></script>
    <script type="text/javascript" src="js/projectile.js"></script>
    <script type="text/javascript" src="js/creep.js"></script>

    <!-- Specific classes for campus defence -->
    <script type="text/javascript" src="js/towers/common.js"></script>
    <script type="text/javascript" src="js/towers/Fadderister.js"></script>
    <script type="text/javascript" src="js/towers/Faddrar.js"></script>
    <script type="text/javascript" src="js/creeps/fohs.js"></script>
    <script type="text/javascript" src="js/creeps/Ninjor.js"></script>
    <script type="text/javascript" src="js/levels.js"></script>

    <!-- Background music -->
    <script>
        let music = new Audio("audio/myrstacken.mp3");
        music.loop = true;
        music.preload = true;
        music.addEventListener('timeupdate', function () {
            var buffer = .44;
            if (this.currentTime > this.duration - buffer) {
                this.currentTime = 0;
                this.play();
            }
        }, false);
        
        let music_speedy = new Audio("audio/myrstacken_speedy.mp3");
        music_speedy.loop = true;
        music_speedy.preload = true;
        music_speedy.addEventListener('timeupdate', function () {
            var buffer = .44;
            if (this.currentTime > this.duration - buffer) {
                this.currentTime = 0;
                this.play();
            }
        }, false);
    </script>

    <!-- The main controller -->
    <script type="text/javascript" src="js/TDController.js"></script>
</head>
<body>
    <div class="header">
        Campus Tornförsvar
    </div>
    <div class="main">
        <div class="game">
            <div class="controllbar">
                <button id="playButton" class="controllerButton">▶</button>
                <button id="fastForwardButton" class="controllerButton">▶▶</button>
                <button id="resetButton" class="controllerButton">&#8634;</button>
            </div>
            <div class="infobar">
                Nivå <span id="levelno">Ø</span> - <div id="creepSummary"></div>
            </div>
            <div class="statusbar">
                <div class="counter">&#128176; <span id="moneycounter" class="counter">500</span></div>
                <div class="counter">❤️<span id="healthcounter" class="counter">191</span></div>
            </div>
            <canvas name="gameboard" width="598" height="500" style="border:1px solid #000;">
            </canvas>
            <div id="messagebox">
                &gt;&nbsp;_
            </div>
        </div>
        <div class="menus">
            <div class="towerMarket">
                <div id="towerTemplate" class="towerInfo template">
                    <div>
                        <img name="image" src="img/map.png" />
                    </div>
                    <div>
                        <strong name="title">Title</strong> <span class="unlockInfo">Info</span><br />
                        <span name="desc">Desc. Lorem ipsum dolor sit amet</span>
                    </div>
                    <button name="buybtn">
                        Köp<br />(💰<span name="cost"></span>)
                    </button>
                </div> 
            </div>
            <div class="contextMenu hideme">
                <h3 name="name">Namn</h3>
                <div class="infofield">
                    <div>
                        <img name="image" src="img/map.png" />
                    </div>
                    <div>
                        Antal träffar<br />
                        Räckvidd<br />
                        Tid mellan <span name="shottype">skott</span><br />
                        Uppgraderingar
                    </div>
                    <div>
                        <span name="hits">X</span><br />
                        <span name="range">Y</span> rutor<br />
                        <span name="CDtime">Z</span><br />
                        <div name="upgrades"></div>
                    </div>
                </div>
                <div id="optionTemplate" class="contextOption template">
                    <div>
                        <img name="image" src="img/map.png" />
                    </div>
                    <div>
                        <strong name="title">Titel</strong> <span class="unlockInfo">Info</span><br />
                        <span name="desc">Ev. en beskrivning?</span>
                        <div name="incompatibleUpgrades">Denna uppgradering är inkompatibel med: </div>
                    </div>
                    <button name="actionbtn">
                        <span name="action"></span><br />(💰<span name="cost"></span>)
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        Ett spel av <a href="https://f.kth.se/arcade/kvackman" target="_blank">Pyro</a> & Cryo
    </div>

    <script type="text/javascript">
        var controller = new TDController();
        controller.setupTowerTable();   
    </script>
</body>
</html>

